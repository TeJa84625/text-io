<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>View Text</title>
</head>
<body>
  <h1>Shared Text</h1>
  <div id="output">Loading...</div>

  <script>
    const ENDPOINT = "https://script.google.com/macros/s/MjBPmcb1unHFpw3cQgMQfSZJkq2sV7_hS/exec";

    async function loadText() {
      const params = new URLSearchParams(window.location.search);
      const textID = params.get("textid");

      if (!textID) {
        document.getElementById("output").innerText = "❌ No text ID provided.";
        return;
      }

      try {
        const response = await fetch(`${ENDPOINT}?textid=${textID}`);
        const result = await response.json();

        if (result.success) {
          document.getElementById("output").innerHTML = `
            <p><strong>Text ID:</strong> ${result.textID}</p>
            <p><strong>Timestamp:</strong> ${result.timestamp}</p>
            <p><strong>Text:</strong></p>
            <pre>${result.text}</pre>
          `;
        } else {
          document.getElementById("output").innerText = "❌ Text not found.";
        }
      } catch (error) {
        console.error("Error loading text:", error);
        document.getElementById("output").innerText = "❌ Failed to load text.";
      }
    }

    loadText();
  </script>
</body>
</html>
